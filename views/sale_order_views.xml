<odoo>

    <!-- Hide removed lines server-side -->
    <record id="view_order_form_moyee_subscription"
            model="ir.ui.view">
        <field name="name">sale.order.form.moyee.subscription</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='order_line']"
                   position="attributes">
                <attribute name="domain">
                    [('x_moyee_is_removed','=',False),
                     ('product_uom_qty','&gt;',0)]
                </attribute>
            </xpath>

        </field>
    </record>


    <!-- Odoo 18 uses <list> not <tree> -->
    <record id="view_order_line_tree_moyee_remove_btn"
            model="ir.ui.view">
        <field name="name">sale.order.line.list.moyee.remove.btn</field>
        <field name="model">sale.order.line</field>
        <field name="inherit_id" ref="sale.view_order_line_tree"/>
        <field name="arch" type="xml">

            <xpath expr="//list" position="inside">
                <button name="action_moyee_soft_remove"
                        type="object"
                        icon="fa-trash"
                        class="btn-link"
                        attrs="{'invisible':[('x_moyee_is_removed','=',True)]}"/>
            </xpath>

        </field>
    </record>

</odoo>