<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <template id="moyee_subscription_portal_delete_btn"
            inherit_id="sale_subscription.subscription_portal_content">

    <!-- Hide removed / zero-qty lines only on subscription page -->
    <xpath expr="//t[@name='product_line_row']" position="attributes">
      <attribute name="t-if">
        not line.display_type and line.product_type != 'combo'
        and not getattr(line, 'x_moyee_is_removed', False)
        and line.product_uom_qty &gt; 0
      </attribute>
    </xpath>

    <!-- Add Delete column header (only on subscription page) -->
    <xpath expr="//th[@id='subtotal_header']" position="after">
      <th class="text-end">Action</th>
    </xpath>

    <!-- Add Delete button cell on each product line row -->
    <xpath expr="//t[@name='product_line_row']/td[last()]" position="after">
      <td class="text-end">
        <a t-attf-href="/my/subscription/#{sale_order.id}/line/#{line.id}/remove?access_token=#{sale_order.access_token}"
           class="btn btn-sm btn-danger">
          Delete
        </a>
      </td>
    </xpath>

  </template>

</odoo>