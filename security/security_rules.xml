<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Portal users can only read their own subscriptions -->
    <record id="rule_portal_own_subscriptions_moyee" model="ir.rule">
        <field name="name">Portal: own subscriptions (Moyee)</field>
        <field name="model_id" ref="sale_subscription.model_sale_subscription"/>
        <field name="domain_force">[('partner_id', '=', user.partner_id.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
    </record>

    <!-- Prevent portal users from unlinking subscription lines -->
    <record id="rule_portal_no_unlink_subscription_lines_moyee" model="ir.rule">
        <field name="name">Portal: no unlink subscription lines (Moyee)</field>
        <field name="model_id" ref="sale_subscription.model_sale_subscription_line"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="perm_unlink" eval="False"/>
        <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
    </record>
</odoo>
