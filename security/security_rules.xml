<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Portal users can only read their own subscription orders -->
    <record id="rule_portal_own_subscription_orders_moyee" model="ir.rule">
        <field name="name">Portal: own subscription orders (Moyee)</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain_force">[('partner_id', '=', user.partner_id.id), ('is_subscription', '=', True)]</field>
        <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
    </record>

    <!-- Prevent portal users from unlinking sale order lines -->
    <record id="rule_portal_no_unlink_sale_order_lines_moyee" model="ir.rule">
        <field name="name">Portal: no unlink sale order lines (Moyee)</field>
        <field name="model_id" ref="sale.model_sale_order_line"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="perm_unlink" eval="False"/>
        <field name="groups" eval="[(4, ref('base.group_portal'))]"/>
    </record>
</odoo>
